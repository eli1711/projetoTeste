<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Login - Sistema de Avaliação CPA</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gradient-to-br from-slate-100 to-red-100 min-h-screen flex items-center justify-center py-12 px-6 font-sans">
  <div class="w-full max-w-md">

    <!-- Badge topo -->
    <div class="mb-6 text-center">
      <span class="inline-flex items-center px-3 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold tracking-wide uppercase">
        Acesso Institucional
      </span>
    </div>

    <!-- Card principal -->
    <div class="bg-white shadow-xl rounded-2xl p-8 border border-red-100 relative overflow-hidden">
      <!-- Barra sutil no topo -->
      <div class="absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-red-700 via-red-500 to-red-700"></div>

      <!-- Título + ícone -->
      <div class="flex flex-col items-center mb-6 mt-2">
        <div class="h-11 w-11 rounded-xl bg-red-50 flex items-center justify-center mb-3">
          <!-- Ícone "escudo" / segurança -->
          <svg xmlns="http://www.w3.org/2000/svg"
               class="h-6 w-6 text-red-700" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2 5 5v6c0 5 3.5 9 7 11 3.5-2 7-6 7-11V5l-7-3z" />
            <path d="m9 12 2 2 4-4" />
          </svg>
        </div>
        <h1 class="text-2xl font-bold text-slate-900 tracking-tight text-center">
          Sistema de Avaliação CPA
        </h1>
        <p class="text-sm text-slate-500 text-center mt-2">
          Faça login com seu usuário institucional para acessar o painel de avaliações.
        </p>
      </div>

      <!-- Mensagens de erro/sucesso -->
      <div th:if="${param.error}"
           class="mb-4 text-center text-red-700 font-medium text-sm bg-red-50 border border-red-200 rounded-lg py-2 px-3">
        Usuário ou senha inválidos. Verifique seus dados e tente novamente.
      </div>

      <div th:if="${param.logout}"
           class="mb-4 text-center text-emerald-700 font-medium text-sm bg-emerald-50 border border-emerald-200 rounded-lg py-2 px-3">
        Logout realizado com sucesso.
      </div>

      <div th:if="${param.cadastroSucesso}"
           class="mb-4 text-center text-emerald-700 font-medium text-sm bg-emerald-50 border border-emerald-200 rounded-lg py-2 px-3">
        Cadastro realizado com sucesso! Agora faça login.
      </div>

      <!-- Formulário de Login -->
      <form th:action="@{/perform_login}" method="post" class="space-y-5">
        <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}" />

        <div class="space-y-1.5">
          <label for="username" class="block text-sm font-medium text-slate-700">
            Usuário institucional
          </label>
          <div class="relative">
            <!-- Ícone usuário -->
            <span class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-slate-400">
              <svg xmlns="http://www.w3.org/2000/svg"
                   class="h-4 w-4" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="8" r="3" />
                <path d="M6 20a6 6 0 0 1 12 0" />
              </svg>
            </span>
            <input
              type="text"
              id="username"
              name="username"
              required
              autocomplete="username"
              class="w-full pl-9 pr-4 py-2.5 border border-slate-300 rounded-lg text-sm placeholder-slate-400
                     focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition"
              placeholder="ex.: nome.sobrenome"
            />
          </div>
        </div>

        <div class="space-y-1.5">
          <label for="password" class="block text-sm font-medium text-slate-700">
            Senha
          </label>
          <div class="relative">
            <!-- Ícone cadeado -->
            <span class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-slate-400">
              <svg xmlns="http://www.w3.org/2000/svg"
                   class="h-4 w-4" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" />
                <path d="M7 11V7a5 5 0 0 1 10 0v4" />
              </svg>
            </span>
            <input
              type="password"
              id="password"
              name="password"
              required
              autocomplete="current-password"
              class="w-full pl-9 pr-4 py-2.5 border border-slate-300 rounded-lg text-sm placeholder-slate-400
                     focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition"
              placeholder="Digite sua senha"
            />
          </div>
          <p class="text-[11px] text-slate-400 mt-1">
            Em caso de problemas de acesso, procure a coordenação ou o suporte de TI.
          </p>
        </div>

        <div class="pt-3">
          <button
            type="submit"
            class="w-full bg-red-700 text-white px-6 py-2.5 rounded-lg text-sm font-semibold shadow-sm
                   hover:bg-red-800 focus:ring-2 focus:ring-red-500 focus:outline-none transition inline-flex items-center justify-center gap-2">
            <!-- Ícone seta entrar -->
            <svg xmlns="http://www.w3.org/2000/svg"
                 class="h-4 w-4" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 5h11v14H9" />
              <path d="m13 12-8-6v12z" />
            </svg>
            <span>Entrar</span>
          </button>
        </div>
      </form>

      <!-- Link para auto-cadastro de aluno -->
      <div class="mt-7 pt-5 border-t border-slate-200">
        <p class="text-center text-xs text-slate-500 mb-3">
          Primeiro acesso como aluno?
        </p>
        <a
          href="/users/aluno/registro"
          class="w-full inline-flex justify-center items-center bg-emerald-600 text-white px-4 py-2.5
                 rounded-lg text-sm font-semibold shadow-sm hover:bg-emerald-700
                 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition gap-2">
          <!-- Ícone usuário com + -->
          <svg xmlns="http://www.w3.org/2000/svg"
               class="h-4 w-4" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="8" r="3" />
            <path d="M4 20a5 5 0 0 1 10 0" />
            <path d="M17 8v6" />
            <path d="M20 11h-6" />
          </svg>
          <span>Cadastrar-se como aluno</span>
        </a>
      </div>
    </div>

    <p class="text-center text-slate-400 text-[11px] mt-6">
      © 2025 Sistema de Avaliação CPA • Todos os direitos reservados
    </p>
  </div>
</body>
</html>
